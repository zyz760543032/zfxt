{"remainingRequest":"D:\\demo\\payment-demo-front\\node_modules\\babel-loader\\lib\\index.js!D:\\demo\\payment-demo-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\demo\\payment-demo-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\demo\\payment-demo-front\\src\\views\\Success.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\demo\\payment-demo-front\\src\\views\\Success.vue","mtime":1639405590703},{"path":"D:\\demo\\payment-demo-front\\babel.config.js","mtime":1635679696886},{"path":"D:\\demo\\payment-demo-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\demo\\payment-demo-front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\demo\\payment-demo-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\demo\\payment-demo-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG9yZGVySW5mb0FwaSBmcm9tICIuLi9hcGkvb3JkZXJJbmZvIjsKaW1wb3J0IHd4UGF5QXBpIGZyb20gIi4uL2FwaS93eFBheSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIC8v6K6i5Y2V5YiX6KGoCiAgICAgIHJlZnVuZERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAvL+mAgOasvuW8ueeqlwogICAgICBvcmRlck5vOiAnJywKICAgICAgLy/pgIDmrL7orqLljZXlj7cKICAgICAgcmVhc29uOiAnJywKICAgICAgLy/pgIDmrL7ljp/lm6AsCiAgICAgIHJlZnVuZFN1Ym1pdEJ0bkRpc2FibGVkOiBmYWxzZSAvL+mYsuatoumHjeWkjeaPkOS6pAoKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5zaG93T3JkZXJMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+aYvuekuuiuouWNleWIl+ihqAogICAgc2hvd09yZGVyTGlzdDogZnVuY3Rpb24gc2hvd09yZGVyTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIG9yZGVySW5mb0FwaS5saXN0KCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0OwogICAgICB9KTsKICAgIH0sCiAgICAvL+eUqOaIt+WPlua2iOiuouWNlQogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwob3JkZXJObykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHd4UGF5QXBpLmNhbmNlbChvcmRlck5vKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UpOyAvL+WIt+aWsOiuouWNleWIl+ihqAoKCiAgICAgICAgX3RoaXMyLnNob3dPcmRlckxpc3QoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/pgIDmrL7lr7nor53moYYKICAgIHJlZnVuZDogZnVuY3Rpb24gcmVmdW5kKG9yZGVyTm8pIHsKICAgICAgdGhpcy5yZWZ1bmREaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5vcmRlck5vID0gb3JkZXJObzsKICAgIH0sCiAgICAvL+WFs+mXremAgOasvuWvueivneahhgogICAgY2xvc2VEaWFsb2c6IGZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkgewogICAgICBjb25zb2xlLmxvZygnY2xvc2UuLi4uLi4uLi4uLi4uLi4uLicpOwogICAgICB0aGlzLnJlZnVuZERpYWxvZ1Zpc2libGUgPSBmYWxzZTsgLy/ov5jljp/nu4Tku7bnirbmgIEKCiAgICAgIHRoaXMub3JkZXJObyA9ICcnOwogICAgICB0aGlzLnJlYXNvbiA9ICcnOwogICAgICB0aGlzLnJlZnVuZFN1Ym1pdEJ0bkRpc2FibGVkID0gZmFsc2U7CiAgICB9LAogICAgLy/noa7orqTpgIDmrL4KICAgIHRvUmVmdW5kczogZnVuY3Rpb24gdG9SZWZ1bmRzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMucmVmdW5kU3VibWl0QnRuRGlzYWJsZWQgPSB0cnVlOyAvL+emgeeUqOaMiemSru+8jOmYsuatoumHjeWkjeaPkOS6pAoKICAgICAgd3hQYXlBcGkucmVmdW5kcyh0aGlzLm9yZGVyTm8sIHRoaXMucmVhc29uKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZScsIHJlc3BvbnNlKTsKCiAgICAgICAgX3RoaXMzLmNsb3NlRGlhbG9nKCk7CgogICAgICAgIF90aGlzMy5zaG93T3JkZXJMaXN0KCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Success.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA,OAAA,YAAA,MAAA,kBAAA;AACA,OAAA,QAAA,MAAA,cAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AACA;AACA,MAAA,mBAAA,EAAA,KAFA;AAEA;AACA,MAAA,OAAA,EAAA,EAHA;AAGA;AACA,MAAA,MAAA,EAAA,EAJA;AAIA;AACA,MAAA,uBAAA,EAAA,KALA,CAKA;;AALA,KAAA;AAOA,GATA;AAWA,EAAA,OAXA,qBAWA;AACA,SAAA,aAAA;AACA,GAbA;AAeA,EAAA,OAAA,EAAA;AAEA;AACA,IAAA,aAHA,2BAGA;AAAA;;AACA,MAAA,YAAA,CAAA,IAAA,GAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAFA;AAGA,KAPA;AASA;AACA,IAAA,MAVA,kBAUA,OAVA,EAUA;AAAA;;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,OAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA,OAAA,EADA,CAEA;;;AACA,QAAA,MAAA,CAAA,aAAA;AACA,OAJA;AAKA,KAhBA;AAkBA;AACA,IAAA,MAnBA,kBAmBA,OAnBA,EAmBA;AACA,WAAA,mBAAA,GAAA,IAAA;AACA,WAAA,OAAA,GAAA,OAAA;AACA,KAtBA;AAwBA;AACA,IAAA,WAzBA,yBAyBA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,wBAAA;AACA,WAAA,mBAAA,GAAA,KAAA,CAFA,CAGA;;AACA,WAAA,OAAA,GAAA,EAAA;AACA,WAAA,MAAA,GAAA,EAAA;AACA,WAAA,uBAAA,GAAA,KAAA;AACA,KAhCA;AAkCA;AACA,IAAA,SAnCA,uBAmCA;AAAA;;AACA,WAAA,uBAAA,GAAA,IAAA,CADA,CACA;;AACA,MAAA,QAAA,CAAA,OAAA,CAAA,KAAA,OAAA,EAAA,KAAA,MAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,UAAA,EAAA,QAAA;;AACA,QAAA,MAAA,CAAA,WAAA;;AACA,QAAA,MAAA,CAAA,aAAA;AACA,OAJA;AAKA;AA1CA;AAfA,CAAA","sourcesContent":["<template>\r\n  <div class=\"bg-fa of\">\r\n    <section id=\"index\" class=\"container\">\r\n      <header class=\"comm-title\">\r\n        <h2 class=\"fl tac\">\r\n          <span class=\"c-333\">订单列表</span>\r\n        </h2>\r\n      </header>\r\n      <el-table :data=\"list\" border style=\"width: 100%\">\r\n        <el-table-column type=\"index\" width=\"50\"></el-table-column>\r\n        <el-table-column prop=\"orderNo\" label=\"订单编号\" width=\"230\" ></el-table-column>\r\n        <el-table-column prop=\"title\" label=\"订单标题\"></el-table-column>\r\n        <el-table-column prop=\"totalFee\" label=\"订单金额\">\r\n          <template slot-scope=\"scope\">\r\n              {{scope.row.totalFee / 100}} 元\r\n          </template>  \r\n        </el-table-column>\r\n        <el-table-column label=\"订单状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag v-if=\"scope.row.orderStatus === '未支付'\">\r\n              {{scope.row.orderStatus}}\r\n            </el-tag>\r\n            <el-tag v-if=\"scope.row.orderStatus === '支付成功'\" type=\"success\">\r\n              {{ scope.row.orderStatus }}\r\n            </el-tag>\r\n            <el-tag v-if=\"scope.row.orderStatus === '超时已关闭'\" type=\"warning\">\r\n              {{scope.row.orderStatus}}\r\n            </el-tag>\r\n            <el-tag v-if=\"scope.row.orderStatus === '用户已取消'\" type=\"info\">\r\n              {{scope.row.orderStatus}}\r\n            </el-tag>\r\n            <el-tag v-if=\"scope.row.orderStatus === '退款中'\" type=\"danger\">\r\n              {{scope.row.orderStatus}}\r\n            </el-tag>\r\n            <el-tag v-if=\"scope.row.orderStatus === '已退款'\" type=\"info\">\r\n              {{scope.row.orderStatus}}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"createTime\" label=\"创建时间\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"100\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button v-if=\"scope.row.orderStatus === '未支付'\" type=\"text\" @click=\"cancel(scope.row.orderNo)\">取消</el-button>\r\n            <el-button v-if=\"scope.row.orderStatus === '支付成功'\" type=\"text\" @click=\"refund(scope.row.orderNo)\">退款</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </section>\r\n\r\n    <!-- 退款对话框 -->\r\n   <el-dialog\r\n      :visible.sync=\"refundDialogVisible\"\r\n      @close=\"closeDialog\"\r\n      width=\"350px\"\r\n      center>\r\n      <el-form>\r\n        <el-form-item label=\"退款原因\">\r\n          <el-select v-model=\"reason\" placeholder=\"请选择退款原因\">\r\n            <el-option label=\"不喜欢\" value=\"不喜欢\"></el-option>\r\n            <el-option label=\"买错了\" value=\"买错了\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"toRefunds()\" :disabled=\"refundSubmitBtnDisabled\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport orderInfoApi from \"../api/orderInfo\"\r\nimport wxPayApi from \"../api/wxPay\"\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      list: [], //订单列表\r\n      refundDialogVisible: false, //退款弹窗\r\n      orderNo: '', //退款订单号\r\n      reason: '', //退款原因,\r\n      refundSubmitBtnDisabled: false, //防止重复提交\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.showOrderList()\r\n  },\r\n\r\n  methods: {\r\n\r\n    //显示订单列表\r\n    showOrderList(){\r\n      orderInfoApi.list().then((response) => {\r\n        this.list = response.data.list;\r\n      });\r\n    },\r\n    \r\n    //用户取消订单\r\n    cancel(orderNo){\r\n      wxPayApi.cancel(orderNo).then(response => {\r\n        this.$message.success(response.message)\r\n        //刷新订单列表\r\n        this.showOrderList()\r\n      })\r\n    },\r\n\r\n    //退款对话框\r\n    refund(orderNo){\r\n      this.refundDialogVisible = true\r\n      this.orderNo = orderNo\r\n    },\r\n\r\n    //关闭退款对话框\r\n    closeDialog(){\r\n      console.log('close.................')\r\n      this.refundDialogVisible = false\r\n      //还原组件状态\r\n      this.orderNo = ''\r\n      this.reason = ''\r\n      this.refundSubmitBtnDisabled = false\r\n    },\r\n\r\n    //确认退款\r\n    toRefunds(){\r\n      this.refundSubmitBtnDisabled = true //禁用按钮，防止重复提交\r\n      wxPayApi.refunds(this.orderNo, this.reason).then(response => {\r\n        console.log('response', response)\r\n        this.closeDialog()\r\n        this.showOrderList()\r\n      })\r\n    }\r\n  }\r\n};\r\n</script>"],"sourceRoot":"src/views"}]}